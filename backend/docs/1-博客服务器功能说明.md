# 1-博客服务器功能说明

## 功能描述

Galay Blog Server 是一个基于 galay-http 框架实现的个人博客后端服务器，用于展示 Galay 系列开源项目。

## 核心功能

### 1. 静态文件服务

使用 galay-http 的 `HttpRouter::mount()` 功能挂载前端静态文件目录：

```cpp
StaticFileConfig staticConfig;
staticConfig.setTransferMode(FileTransferMode::AUTO);
staticConfig.setSmallFileThreshold(64 * 1024);    // 64KB
staticConfig.setLargeFileThreshold(1024 * 1024);  // 1MB

router.mount("/", staticDir, staticConfig);
```

传输模式说明：
- **MEMORY**: 小文件 (<64KB) 完整读入内存
- **CHUNK**: 中等文件 (64KB-1MB) 分块传输
- **SENDFILE**: 大文件 (>1MB) 零拷贝传输
- **AUTO**: 自动选择最优模式

### 2. RESTful API

| 接口 | 方法 | 描述 |
|------|------|------|
| `/api/health` | GET | 健康检查，返回服务器状态 |
| `/api/projects` | GET | 获取所有项目列表 |
| `/api/projects/:id` | GET | 获取单个项目详情 |

### 3. 项目数据

服务器内置了 4 个 Galay 项目的信息：

- **galay-kernel**: 高性能 C++20 协程网络库
- **galay-http**: 现代化 HTTP/WebSocket 库
- **galay-utils**: C++20 工具库
- **galay-mcp**: MCP 协议库

## 代码风格

遵循 galay-http 项目的 C++ 开发规范：

- 成员变量：`m_` 前缀 + 蛇形命名 (如 `m_my_variable`)
- 函数：首字母小写驼峰命名 (如 `myFunctionName()`)
- 文件：首字母大写驼峰命名 (如 `BlogServer.cc`)

## 使用方法

### 启动服务器

```bash
./build/bin/blog-server -p 8080 -s ../frontend
```

### 测试 API

```bash
# 健康检查
curl http://localhost:8080/api/health

# 获取项目列表
curl http://localhost:8080/api/projects

# 获取项目详情
curl http://localhost:8080/api/projects/kernel
```

## 响应示例

### /api/health

```json
{
  "status": "ok",
  "server": "Galay-Blog",
  "version": "1.0.0"
}
```

### /api/projects

```json
[
  {
    "id": "kernel",
    "name": "galay-kernel",
    "description": "高性能 C++20 协程网络库",
    "language": "C++20",
    "license": "MIT"
  },
  ...
]
```

### /api/projects/kernel

```json
{
  "id": "kernel",
  "name": "galay-kernel",
  "description": "高性能 C++20 协程网络库",
  "longDescription": "galay-kernel 是整个 Galay 框架的核心...",
  "features": ["极致性能", "协程驱动", "跨平台", "异步文件 IO"],
  "language": "C++20",
  "license": "MIT",
  "github": "https://github.com/galay/galay-kernel"
}
```

## 技术架构

```
┌─────────────────────────────────────┐
│           Blog Server               │
├─────────────────────────────────────┤
│  API Handlers    │  Static Files    │
│  - health        │  - HTML/CSS/JS   │
│  - projects      │  - Images        │
├─────────────────────────────────────┤
│           HttpRouter                │
├─────────────────────────────────────┤
│           HttpServer                │
├─────────────────────────────────────┤
│           galay-kernel              │
│     (kqueue/epoll/io_uring)         │
└─────────────────────────────────────┘
```
