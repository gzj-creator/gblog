# 快速开始

## 1. 构建

```bash
cmake -S . -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build -j
```

## 2. 协程会话接口最小示例

```cpp
#include "galay-etcd/sync/EtcdClient.h"
#include <galay-kernel/kernel/Runtime.h>
#include <iostream>

using namespace galay::kernel;

Coroutine run(IOScheduler* scheduler) {
    galay::etcd::EtcdConfig cfg;
    cfg.endpoint = "http://127.0.0.1:2379";
    galay::etcd::EtcdClient session(scheduler, cfg);

    auto conn = co_await session.connect();
    if (!conn) co_return;

    auto put = co_await session.put("/demo/key", "hello");
    if (!put) co_return;

    auto get = co_await session.get("/demo/key");
    if (!get) co_return;
    for (const auto& kv : session.lastKeyValues()) {
        std::cout << kv.key << " => " << kv.value << "\n";
    }

    auto del = co_await session.del("/demo/key");
    if (!del) co_return;

    co_await session.close();
}
```

## 3. 异步客户端最小示例

```cpp
#include "galay-etcd/async/AsyncEtcdClient.h"
#include <galay-kernel/kernel/Runtime.h>

using namespace galay::kernel;

Coroutine run(IOScheduler* scheduler) {
    galay::etcd::AsyncEtcdClient client(scheduler);

    co_await client.connect();
    if (!client.lastError().isOk()) co_return;

    co_await client.put("/demo/async", "value");
    co_await client.get("/demo/async");

    co_await client.close();
}
```
