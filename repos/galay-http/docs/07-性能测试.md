# 07-性能测试

本文件优先记录最新实测数据（本轮复测），历史值仅作基线参考。

## 本轮实测（2026-02-15）

- 构建：`Release`
- 执行方式：本地回环压测（解除沙箱网络限制后执行）
- 原始日志目录（两轮）：
  - `/tmp/galay_suite_real_20260215_124908`
  - `/tmp/galay_suite_real_20260215_125304`

## 测试参数

- B1/B2（HTTP）：`127.0.0.1:9700`，连接数 `100/500`，时长 `12s`
- B3/B4（H2c）：`127.0.0.1:9701`，场景 `10x10` / `50x200` / `100x100` / `200x100`
- B5/B6（WebSocket）：`ws://127.0.0.1:8080/ws`，场景 `10客户端 8s 20B` / `100客户端 12s 1024B`
- B7/B8（WSS）：`wss://127.0.0.1:9743/ws`，场景 `10客户端 8s 20B` / `20客户端 8s 4096B`
- B9（HPACK）：`iterations=2000`
- B10/B11（H2c Mux）：`127.0.0.1:9703`，`80连接 x 50流 x 80轮`

## 两轮复测结果

| 组别 | 轮次1 | 轮次2 | 均值 |
|---|---|---|---|
| B1/B2（100连接） | `207740.83 req/s` | `209913.00 req/s` | `208826.92 req/s` |
| B1/B2（500连接） | `215239.25 req/s` | `187069.24 req/s` | `201154.25 req/s` |
| B3/B4（10x10） | `99 req/s` | `99 req/s` | `99 req/s` |
| B3/B4（50x200） | `9950 req/s` | `9950 req/s` | `9950 req/s` |
| B3/B4（100x100） | `9970 req/s` | `9990 req/s` | `9980 req/s` |
| B3/B4（200x100） | `19940 req/s` | `19920 req/s` | `19930 req/s` |
| B5/B6（10客户端 20B） | `172539 msg/s` | `159315 msg/s` | `165927 msg/s` |
| B5/B6（100客户端 1KB） | `158618 msg/s` | `151958 msg/s` | `155288 msg/s` |
| B5/B6（100客户端 1KB 吞吐） | `154.901 MB/s` | `148.397 MB/s` | `151.649 MB/s` |
| B7/B8（10客户端 20B） | `165873 msg/s` | `149447 msg/s` | `157660 msg/s` |
| B7/B8（20客户端 4KB） | `119737 msg/s` | `111338 msg/s` | `115537.5 msg/s` |
| B7/B8（20客户端 4KB 吞吐） | `467.722 MB/s` | `434.912 MB/s` | `451.317 MB/s` |
| B9（Encode） | `1257341 ops/s` | `1219500 ops/s` | `1238420.5 ops/s` |
| B9（Decode） | `2645837 ops/s` | `2623557 ops/s` | `2634697 ops/s` |
| B10/B11（320000请求吞吐） | `159441 req/s` | `159680 req/s` | `159560.5 req/s` |

## 稳定性结论

- 两轮中全部组别 `rc=0`。
- B1/B2、B3/B4、B5/B6、B7/B8、B10/B11 均无失败请求（对应场景下 `fail=0`）。
- B10/B11 两轮均为 `success=320000, fail=0`。

## 历史基线

- 旧版历史文档：`docs/B1-HttpServer压测.md` ~ `docs/B8-WssClient压测.md`（已合并，不再单独保留）。
