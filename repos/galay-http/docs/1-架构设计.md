# 1-架构设计

## 1. 目标

Galay-HTTP 目标是提供统一的 C++23 协程网络接口，覆盖：

- HTTP/1.1
- WebSocket (`ws` / `wss`)
- HTTP/2 (`h2c`)
- TLS 场景（`https` / `wss`）

## 2. 核心分层

```text
应用层（example / test / benchmark）
    ↓
galay-http/kernel
    ├── http
    ├── http2
    └── websocket
    ↓
galay-http/protoc
    ├── http
    ├── http2
    └── websocket
    ↓
galay-kernel / galay-ssl
```

## 3. 运行时模型

- 服务端：`HttpServer` 内部托管 Runtime 与调度器。
- 客户端：通常使用 `galay-kernel::Runtime`，从 IO 调度器提交协程。
- 所有 I/O 通过 awaitable 进行状态推进，调用层使用 `co_await`。

## 4. Router 与静态文件

- `HttpRouter` 支持精确匹配、参数路由与通配符。
- 静态文件支持 `mount` / `mountHardly`。
- 传输模式：`MEMORY` / `CHUNK` / `SENDFILE` / `AUTO`。

## 5. 模块化接口

提供 3 个 C++23 命名模块接口：

- `galay.http`
- `galay.http2`
- `galay.websocket`

对应文件位于 `galay-http/module/`。

## 6. Example 策略（精简后）

仅保留：

- 各协议 Echo 示例
- 静态服务器示例
- Proxy 示例

避免与测试/压测重复的样例。
